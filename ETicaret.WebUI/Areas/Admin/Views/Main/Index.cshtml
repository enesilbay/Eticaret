@*@model IEnumerable<ETicaret.Core.Entities.Product>*@
@{
    ViewData["Title"] = "Admin AnaSayfa";
}

<div class="row g-4">
    <!-- Kartlar -->
    <div class="col-xl-3 col-md-6">
        <div class="card text-white bg-gradient-primary mb-4 shadow-sm">
            <div class="card-body d-flex align-items-center justify-content-between">
                <div>
                    <h6 class="mb-1 fw-bold">Toplam Ürün</h6>
                    <h3>120</h3>
                </div>
                <i class="fas fa-box fa-2x opacity-75"></i>
            </div>
            <div class="card-footer small d-flex justify-content-between">
                <a class="text-white fw-bold text-decoration-none" href="#">Detaylar</a>
                <i class="fas fa-angle-right"></i>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card text-white bg-gradient-success mb-4 shadow-sm">
            <div class="card-body d-flex align-items-center justify-content-between">
                <div>
                    <h6 class="mb-1 fw-bold">Satışlar</h6>
                    <h3>85</h3>
                </div>
                <i class="fas fa-shopping-cart fa-2x opacity-75"></i>
            </div>
            <div class="card-footer small d-flex justify-content-between">
                <a class="text-white fw-bold text-decoration-none" href="#">Detaylar</a>
                <i class="fas fa-angle-right"></i>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card text-white bg-gradient-warning mb-4 shadow-sm">
            <div class="card-body d-flex align-items-center justify-content-between">
                <div>
                    <h6 class="mb-1 fw-bold">Yeni Kullanıcılar</h6>
                    <h3>45</h3>
                </div>
                <i class="fas fa-users fa-2x opacity-75"></i>
            </div>
            <div class="card-footer small d-flex justify-content-between">
                <a class="text-white fw-bold text-decoration-none" href="#">Detaylar</a>
                <i class="fas fa-angle-right"></i>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card text-white bg-gradient-danger mb-4 shadow-sm">
            <div class="card-body d-flex align-items-center justify-content-between">
                <div>
                    <h6 class="mb-1 fw-bold">İade Talepleri</h6>
                    <h3>7</h3>
                </div>
                <i class="fas fa-undo fa-2x opacity-75"></i>
            </div>
            <div class="card-footer small d-flex justify-content-between">
                <a class="text-white fw-bold text-decoration-none" href="#">Detaylar</a>
                <i class="fas fa-angle-right"></i>
            </div>
        </div>
    </div>
</div>

<!-- Grafikler -->
<div class="row g-4 mt-1">
    <div class="col-xl-6">
        <div class="card shadow-sm rounded-3">
            <div class="card-header fw-bold">
                <i class="fas fa-chart-area me-2"></i> Satış Trendleri
            </div>
            <div class="card-body">
                <canvas id="myAreaChart" width="100%" height="40"></canvas>
            </div>
        </div>
    </div>
    <div class="col-xl-6">
        <div class="card shadow-sm rounded-3">
            <div class="card-header fw-bold">
                <i class="fas fa-chart-bar me-2"></i> Kategori Bazlı Satışlar
            </div>
            <div class="card-body">
                <canvas id="myBarChart" width="100%" height="40"></canvas>
            </div>
        </div>
    </div>
</div>

<!-- Tablo -->
<div class="card shadow-sm rounded-3 mt-4">
    <div class="card-header fw-bold bg-dark text-white">
        <i class="fas fa-table me-2"></i> Ürünler
    </div>
    <div class="card-body table-responsive">
        <table id="productsTable" class="table table-striped table-hover align-middle">
            <thead class="table-dark">
                <tr>
                    <th>Ürün Adı</th>
                    <th>Kayıt Tarihi</th>
                    <th>Resim</th>
                    <th>Fiyat</th>
                    <th>Ürün Kodu</th>
                    <th>Stok</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in ViewBag.Products)
                {
                    <tr>
                        <td>@item.Name</td>
                        <td>@item.CreateDate.ToString("dd.MM.yyyy")</td>
                        <td>
                            <img src="@item.Image" alt="@item.Name" class="img-thumbnail" style="height:50px;" />
                        </td>
                        <td>@item.Price.ToString("C")</td>
                        <td>@item.ProductCode</td>
                        <td>@item.Stock</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section Scripts {
    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js" crossorigin="anonymous"></script>
    <script>
        // Gradient Alan Grafiği
        var ctx = document.getElementById("myAreaChart").getContext("2d");
        var gradient = ctx.createLinearGradient(0, 0, 0, 400);
        gradient.addColorStop(0, "rgba(78, 115, 223, 0.9)");
        gradient.addColorStop(1, "rgba(78, 115, 223, 0.05)");

        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ["Ocak", "Şubat", "Mart", "Nisan", "Mayıs"],
                datasets: [{
                    label: "Satışlar",
                    data: [100, 200, 150, 300, 250],
                    backgroundColor: gradient,
                    borderColor: "#4e73df",
                    borderWidth: 2,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                plugins: { legend: { display: false } },
                scales: {
                    x: { grid: { display: false } },
                    y: { beginAtZero: true }
                }
            }
        });

        // Bar Grafiği
        new Chart(document.getElementById("myBarChart"), {
            type: 'bar',
            data: {
                labels: ["Elektronik", "Mobilya", "Moda", "Spor", "Diğer"],
                datasets: [{
                    label: "Satışlar",
                    data: [120, 90, 150, 70, 110],
                    backgroundColor: ["#4e73df", "#1cc88a", "#f6c23e", "#e74a3b", "#36b9cc"]
                }]
            },
            options: {
                plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: true } }
            }
        });
    </script>

    <!-- DataTables -->
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js"></script>
    <script>
        const dataTable = new simpleDatatables.DataTable("#productsTable", {
            searchable: true,
            fixedHeight: true,
            perPage: 10,
            perPageSelect: [5, 10, 25, 50],
            sortable: true
        });
    </script>
}
